<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>360¬∞ Video Tour</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <link rel="stylesheet" href="css/style.css">
  <script src="js/index.js" defer></script>
  <script src="js/hotspot.js" defer></script>
  <script src="js/infoicons.js" defer></script>
  <script src="js/controls.js" defer></script>
  <script src="js/startScreen.js" defer></script>
  <script src="js/tourSummary.js" defer></script>


</head>

<body>
  <!-- START SCREEN -->
  <div id="startScreen">



    <!-- Sidebar Menu (Left) -->
    <div class="sidebar-menu">
      <div class="menu-burger" id="menuBurger">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
        <span>Menu</span>
      </div>
      <div class="sidebar-icons">
        <!-- Placeholders for bottom icons if needed -->
      </div>
    </div>

    <!-- Side Drawer (Hidden by default) -->
    <div class="side-drawer" id="sideDrawer">
      <div class="drawer-header">
        <h2>Menu</h2>
        <button class="close-drawer" id="closeDrawer">‚úï</button>
      </div>
      <ul class="drawer-list">
        <li><a href="#" class="drawer-link" data-action="thematic">Thematic Tours</a></li>
        <li><a href="#" class="drawer-link" data-action="locations">All Locations</a></li>
        <li><a href="#" class="drawer-link" data-action="about">About HOLA</a></li>
        <li><a href="#" class="drawer-link" data-action="contact">Contact Us</a></li>
      </ul>
    </div>

    <!-- Top Menu (Right) -->
    <div class="top-menu">
      <a href="#" class="menu-link">Home</a>
      <a href="#" class="menu-link">VR</a>
      <a href="#" class="menu-link">Social</a>
      <a href="#" class="menu-link">Aalto.fi</a>
      <a href="#" class="menu-link contact-btn">Contact us</a>
    </div>

    <!-- Welcome Card (Right Overlay) -->
    <div class="welcome-card">
      <div class="card-header">
        <span class="tag">Thematic tours</span>
        <span class="tag">Auto tour</span>
        <span class="tag icon-tag">üîä OFF</span>
        <span class="close-icon">‚úï</span>
      </div>

      <h1>Hello and welcome to HOLA!</h1>

      <p>
        The Hands-On Laboratory (HOLA) is a research-oriented environment for Computing Education Research (CER),
        dedicated to building a sustainable future.
      </p>
      <p>
        It supports the design, evaluation, and study of innovative tools, pedagogical approaches, and learning
        strategies across all education levels.
      </p>
      <p>
        HOLA also serves as a ‚Äúclassroom of the future‚Äù, fostering inclusive, problem-based learning and supporting
        teacher training and research activities.
      </p>

      <div class="card-actions">
        <button id="startTourBtn" class="action-btn primary">Start from the map</button>
        <button class="action-btn secondary">Start from one of the schools</button>
        <button class="action-btn secondary">Take the thematic tour</button>
      </div>
    </div>

    <!-- Guide Avatar (Bottom Right) -->
    <div class="guide-avatar">
      <div class="avatar-circle">
        <img src="https://ui-avatars.com/api/?name=HOLA&background=ff0000&color=fff" alt="Guide">
      </div>
    </div>

  </div>
  <!-- MENU BAR -->
  <!-- TOP BAR -->
  <div id="topBar">
    <div id="topTabs">
      <div class="tab" data-video="vid1">Entrance</div>
      <div class="tab" data-video="vid2">Collaboration Tables</div>
      <div class="tab" data-video="vid3">Lego Table</div>
      <div class="tab" data-video="vid4">Workstations</div>
      <div class="tab" data-video="vid5">Interactive Screen</div>
    </div>

    <div id="menuRight">
      <button id="autoRotateBtn">
        <img id="autoRotateIcon" src="assets/images/pause.png" alt="Pause">
      </button>
      <button id="endTourBtn">End Tour</button>
    </div>
  </div>
  <div id="visitedCounter">
    Spots visited: <span id="visitedCount">0</span>
  </div>
  <div id="summaryModal"
    style="display:none; position:fixed; top:20%; left:50%; transform:translateX(-50%); 
     background:white; padding:20px; border-radius:10px; z-index:10000; width:300px; box-shadow:0 0 10px rgba(0,0,0,0.5)">
    <div id="summaryContent"></div>
    <button id="restartBtn">Restart Tour</button>
  </div>

  <!-- View Control Buttons -->
  <div class="view-control-buttons">
    <div id="viewUp" class="viewControlButton viewControlButton-1">
      <img class="icon" src="assets/images/up.png" alt="Up">
    </div>
    <div id="viewDown" class="viewControlButton viewControlButton-2">
      <img class="icon" src="assets/images/down.png" alt="Down">
    </div>
    <div id="viewLeft" class="viewControlButton viewControlButton-3">
      <img class="icon" src="assets/images/left.png" alt="Left">
    </div>
    <div id="viewRight" class="viewControlButton viewControlButton-4">
      <img class="icon" src="assets/images/right.png" alt="Right">
    </div>
    <div id="viewIn" class="viewControlButton viewControlButton-5">
      <img class="icon" src="assets/images/plus.png" alt="Zoom In">
    </div>
    <div id="viewOut" class="viewControlButton viewControlButton-6">
      <img class="icon" src="assets/images/minus.png" alt="Zoom Out">
    </div>
  </div>
  <!-- A-FRAME SCENE -->
  <a-scene embedded>

    <!-- ASSETS -->
    <a-assets>
      <a-asset-item id="arrowModel" src="assets/models/rounded-arrow.glb"></a-asset-item>
      <a-asset-item id="iconModel" src="assets/models/info-icon.glb"></a-asset-item>

      <!-- Videos -->
      <video id="vid1" src="assets/videos/overall_view.mp4" loop muted crossorigin="anonymous"></video>
      <video id="vid2" src="assets/videos/collaboration_tables.MP4" loop muted></video>
      <video id="vid3" src="assets/videos/lego_table.MP4" loop muted></video>
      <video id="vid4" src="assets/videos/work_stations.MP4" loop muted></video>
      <video id="vid5" src="assets/videos/interactive_screen.mp4" loop muted></video>

      <a-mixin id="hotspot-text" geometry="primitive: plane; width: 0; height: 0"
        material="color: #faaf52; opacity: 0.85; side: double"
        text="font: dejavu; color: black; align: center; width: 5; wrapCount: 22; baseline: center">
      </a-mixin>
    </a-assets>

    <!-- INTRO SKYBOX (360 Start Screen) -->
    <a-sky id="introSky" src="assets/images/background_entry_point.JPG" rotation="0 -90 0">
      <!-- 3D Hotspot for LAB Entry -->
      <a-entity id="entryHotspot" position="10 2 -1" rotation="0 -90 0" class="clickable"
        geometry="primitive: circle; radius: 0.3" material="color: #ffd400; opacity: 0.8; shader: flat; side: double"
        animation="property: scale; from: 1 1 1; to: 1.2 1.2 1.2; dir: alternate; loop: true; dur: 1000">

        <!-- Tooltip Text (Hidden by default, shown on hover via JS) -->
        <a-entity id="entryTooltip" position="0 1.2 0.1" visible="false"
          geometry="primitive: plane; width: 3.5; height: 1.8"
          material="color: #8c7700; opacity: 1; shader: flat; side: double">
          <a-text value="LAB\nWelcome to the Hands-On Lab\nExplore our research facilities\nClick to enter"
            align="center" position="0 0 0.1" rotation="0 180 0" color="#ffffff" width="3.8" wrap-count="30"
            shader="msdf" side="double"
            font="https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/roboto/Roboto-Bold.json">
          </a-text>
        </a-entity>


      </a-entity>
    </a-sky>

    <!-- HOTSPOTS CONTAINER -->
    <a-entity id="spots" hotspots visible="false">

      <!-- GROUP vid1 -->
      <a-entity id="group-vid1" scale="1 1 1">
        <!-- Collaboration Tables (Left) -->
        <a-gltf-model class="clickable hotspot" gltf-model="#arrowModel"
          spot="linkto:#vid2; spotgroup:group-vid2; videoname: Collaboration Tables"
          hotspot-hover-label="offset: 0 0.7 0; baseScale: 1.0; baseWidth: 1.5" position="-10.19 -1.79 -0.03"
          rotation="77.54 -85.21 98.94" scale="0.26 0.26 0.26" data-name="Collaboration Tables">
        </a-gltf-model>

        <a-gltf-model class="clickable hotspot" spot="linkto:#vid3; spotgroup:group-vid3; videoname: Lego Table"
          hotspot-hover-label="offset: 0 0.7 0; baseScale: 1.0; baseWidth: 1.5" src="#arrowModel"
          position="-4.64 -1.60 -18.60" rotation="-69.16 15.90 -96.11" scale="0.26 0.26 0.26" data-name="Lego Table">
        </a-gltf-model>
        <a-gltf-model class="clickable hotspot" spot="linkto:#vid4; spotgroup:group-vid4; videoname: workstations"
          hotspot-hover-label="offset: 0 0.7 0; baseScale: 1.0; baseWidth: 1.5" src="#arrowModel"
          position="-15.78 -1.07 -18.75" rotation="79 52 -98" scale="0.26 0.26 0.26" data-name="workstations">
        </a-gltf-model>
        <a-gltf-model class="clickable hotspot" spot="linkto:#vid5; spotgroup:group-vid5; videoname: Screen"
          hotspot-hover-label="offset: 0 0.7 0; baseScale: 1.0; baseWidth:1.5 " src="#arrowModel"
          position="-1.00 -0.36 15.82" rotation="-77.0 -179.1 -83.49" scale="0.26 0.26 0.26" data-name="Screen">
        </a-gltf-model>
      </a-entity>

      <!-- GROUP vid2 -->
      <a-entity id="group-vid2" scale="0 0 0">
        <a-entity infoicon="text: For group discussions & teamwork; model: #iconModel; scale: 0.36 0.36 0.36"
          position="-16.5 -5.1 -11.3" rotation="0 -32 0" class="clickable">
        </a-entity>

        <a-entity infoicon="text: Charge laptops, tablets, & phones; model: #iconModel; scale: 0.36 0.36 0.36"
          position="-13.5 -1.04 -2.15" rotation="0 -20 0" class="clickable">
        </a-entity>
        <a-gltf-model class="clickable hotspot" spot="linkto:#vid1; spotgroup:group-vid1; videoname: Entrance"
          hotspot-hover-label="offset: 0 0.7 0; baseScale: 1.0; baseWidth: 1.5" src="#arrowModel"
          position="0.65 -0.11 -7.7" rotation="86.3 -1.34 -86.1" scale="0.26 0.26 0.26" data-name="Entrance">
        </a-gltf-model>

        <a-gltf-model class="clickable hotspot" spot="linkto:#vid3; spotgroup:group-vid3; videoname: Lego Table"
          hotspot-hover-label="offset: 0 0.7 0; baseScale: 1.0; baseWidth: 1.5" src="#arrowModel"
          position="-23.5 0.92 -13.3" rotation="-86.0 62.7 -68.5" scale="0.26 0.26 0.26" data-name="Lego Table">
        </a-gltf-model>
        <a-gltf-model class="clickable hotspot" spot="linkto:#vid4; spotgroup:group-vid4; videoname: workstations"
          hotspot-hover-label="offset: 0 0.7 0; baseScale: 1.0; baseWidth: 1.5" src="#arrowModel"
          position="-19.1 1.6 1.66" rotation="-86.0 62.7 -68.5" scale="0.26 0.26 0.26" data-name="workstations">
        </a-gltf-model>
        <a-gltf-model class="clickable hotspot" spot="linkto:#vid5; spotgroup:group-vid5; videoname: Screen"
          hotspot-hover-label="offset: 0 0.7 0; baseScale: 1.0; baseWidth: 1.5" src="#arrowModel"
          position="37.0 2.7 -33.38" rotation="84.2 129.7 131.8" scale="0.26 0.26 0.26" data-name="screen">
        </a-gltf-model>
      </a-entity>


      <!-- GROUP vid3 -->
      <a-entity id="group-vid3" scale="0 0 0">
        <a-entity
          infoicon="text: 'This LEGO SPIKE Prime robot is used in our lab for hands-on learning in robotics, programming, and engineering'; model: #iconModel; scale: 0.36 0.36 0.36"
          position="-18.75 2.39 7.96" rotation="0 0 0" class="clickable">
        </a-entity>
        <a-entity
          infoicon="text: 'This table is set up with the FLL 2026 UNEARTHED‚Ñ¢ missions, where students explore archaeology through fun robot challenges'; model: #iconModel; scale: 0.36 0.36 0.36"
          position="-10.65 2.03 -2.26" rotation="0 0 0" class="clickable">
        </a-entity>
        <a-gltf-model class="clickable hotspot" spot="linkto:#vid1; spotgroup:group-vid1; videoname: Entrance"
          hotspot-hover-label="offset: 0 0.7 0; baseScale: 1.0; baseWidth: 1.5" src="#arrowModel"
          position="13.15 2.23 -0.61" rotation="86.3 -47.04 -86.1" scale="0.26 0.26 0.26" data-name="Entrance">
        </a-gltf-model>

        <a-gltf-model class="clickable hotspot"
          spot="linkto:#vid2; spotgroup:group-vid2; videoname: Collaboration Tables"
          hotspot-hover-label="offset: 0 0.7 0; baseScale: 1.0; baseWidth: 1.5" src="#arrowModel"
          position="-2.8 2.31 50.4" rotation="88.8 0.003 99.3" scale="0.5 0.5 0.5" data-name="Collaboration Tables">
        </a-gltf-model>


        <a-gltf-model class="clickable hotspot" spot="linkto:#vid4; spotgroup:group-vid4; videoname: workstations"
          hotspot-hover-label="offset: 0 0.7 0; baseScale: 1.0; baseWidth: 1.5" src="#arrowModel"
          position="-32.9 2.7 5.8" rotation="84.0 -90.0 82.1" scale="0.5 0.5 0.5" data-name="workstations">
        </a-gltf-model>
        <a-gltf-model class="clickable hotspot" spot="linkto:#vid5; spotgroup:group-vid5; videoname: Screen"
          hotspot-hover-label src="#arrowModel" position="78.0 12.0 79.8" rotation="85.0 -163.0 -131.9" scale="1 1 1"
          data-name="screen">
        </a-gltf-model>
      </a-entity>


      <!-- GROUP vid4 -->
      <a-entity id="group-vid4" scale="0 0 0">
        <a-gltf-model class="clickable hotspot" spot="linkto:#vid1; spotgroup:group-vid1; videoname: Entrance"
          hotspot-hover-label="offset: 0 0.7 0; baseScale: 1.0; baseWidth: 1.5" src="#arrowModel"
          position="-1.53 0.82 -19.22" rotation="75 172 78" scale="0.26 0.26 0.26" data-name="Entrance">
        </a-gltf-model>
        <a-gltf-model class="clickable hotspot" gltf-model="#arrowModel"
          spot="linkto:#vid2; spotgroup:group-vid2; videoname: Collaboration Tables"
          hotspot-hover-label="offset: 0 0.7 0; baseScale: 1.0; baseWidth: 1.5" position="10.09 -0.03 -7.85"
          rotation="77 172 122" scale="0.26 0.26 0.26" data-name="Collaboration Tables">
        </a-gltf-model>



        <a-gltf-model class="clickable hotspot" spot="linkto:#vid3; spotgroup:group-vid3; videoname: Lego Table"
          hotspot-hover-label="offset: 0 0.7 0; baseScale: 1.0; baseWidth: 1.5" src="#arrowModel"
          position="-16.10 0.20 -13.3" rotation="-86.0 47.7 -68.5" scale="0.26 0.26 0.26" data-name="Lego Table">
        </a-gltf-model>
        <a-gltf-model class="clickable hotspot" spot="linkto:#vid5; spotgroup:group-vid5; videoname: Screen"
          hotspot-hover-label="offset: 0 0.7 0; baseScale: 1.0; baseWidth: 1.5" src="#arrowModel"
          position="37.0 2.7 -50.38" rotation="84.2 146.7 131.8" scale="0.5 0.5 0.5" data-name="screen">
        </a-gltf-model>
      </a-entity>
      <!-- GROUP vid5 -->
      <a-entity id="group-vid5" scale="0 0 0">

        <a-gltf-model class="clickable hotspot" spot="linkto:#vid1; spotgroup:group-vid1; videoname: Entrance"
          hotspot-hover-label="offset: 0 0.7 0; baseScale: 1.0; baseWidth: 1.5" src="#arrowModel"
          position="2.39 -0.11 16.34" rotation="-86 134 -37" scale="0.26 0.26 0.26" data-name="Entrance">
        </a-gltf-model>

        <a-gltf-model class="clickable hotspot" gltf-model="#arrowModel"
          spot="linkto:#vid2; spotgroup:group-vid2; videoname: Collaboration Tables"
          hotspot-hover-label="offset: 0 0.7 0; baseScale: 1.0; baseWidth: 1.5" position="16.8 -1.79 -3.23"
          rotation="87 0 0" scale="0.26 0.26 0.26" data-name="Collaboration Tables">
        </a-gltf-model>
        <a-gltf-model class="clickable hotspot" spot="linkto:#vid3; spotgroup:group-vid3; videoname: Lego Table"
          hotspot-hover-label="offset: 0 0.7 0; baseScale: 1.0; baseWidth: 1.5" src="#arrowModel"
          position="35.05 -1.02 24.5" rotation="80 26 20" scale="0.26 0.26 0.26" data-name="Lego Table">
        </a-gltf-model>
        <a-gltf-model class="clickable hotspot" spot="linkto:#vid4; spotgroup:group-vid4; videoname: workstations"
          hotspot-hover-label="offset: 0 0.7 0; baseScale: 1.0; baseWidth: 1.5" src="#arrowModel"
          position="22.0 0.36 4.76" rotation="-87 45 92" scale="0.26 0.26 0.26" data-name="workstations">
        </a-gltf-model>
      </a-entity>
    </a-entity>

    <!-- CAMERA -->
    <!-- Horizontal pivot -->
    <a-entity id="pivotY" rotation="0 0 0" auto-rotate-pivot="speed: 2">
      <!-- Vertical pivot -->
      <a-entity id="pivotX" rotation="0 0 0">
        <!-- Camera -->
        <a-entity id="cam" camera look-controls="enabled: false">
          <a-entity cursor="fuse:false; rayOrigin:mouse" raycaster="objects:.clickable">
          </a-entity>
        </a-entity>
      </a-entity>
    </a-entity>

    <!-- 360 VIDEO SPHERE -->
    <a-videosphere id="videosphere" src="#vid1" visible="false"></a-videosphere>

  </a-scene>

</body>

</html>